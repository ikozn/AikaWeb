{"version":3,"sources":["webpack:///./src/views/page-event/index.vue?8549","webpack:///./src/views/page-event/index.vue?1009","webpack:///./src/views/page-event/components/EventHeader.vue?f73f","webpack:///./src/views/page-event/components/EventHeader.vue","webpack:///./src/views/page-event/components/EventForm.vue?da5d","webpack:///src/views/page-event/components/EventForm.vue","webpack:///./src/views/page-event/components/EventForm.vue?f7db","webpack:///./src/views/page-event/components/EventForm.vue","webpack:///src/views/page-event/index.vue","webpack:///./src/views/page-event/index.vue?6cfd","webpack:///./src/views/page-event/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","visible","event","on","hideForm","_e","changeTab","staticStyle","slot","model","value","callback","$$v","status","expression","_v","search","showForm","pagination","events","emptyText","scopedSlots","_u","key","fn","item","abbr","_s","name","$event","handleEdit","handleArchive","id","active","handleDel","description","staticRenderFns","script","component","hasEvent","$emit","type","indexOf","_k","keyCode","onSubmit","ref","form","rules","onChange","$set","abbrType","disabledInput","props","data","computed","Object","keys","length","mounted","methods","$refs","validate","valid","components","Header","EventForm","pageSize","hideOnSinglePage","showActive","activeKey","$modal","confirm","title","content","okText","okType","cancelText","onOk","toggleArchiveEvent","$store","getters","$message","success","screenX","screenY","clientX","clientY","result","push","i"],"mappings":"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","file":"js/event.e9a5c105.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"event\"},[(_vm.visible)?_c('EventForm',{attrs:{\"visible\":_vm.visible,\"event\":_vm.event},on:{\"cancel\":_vm.hideForm,\"create\":_vm.hideForm}}):_vm._e(),_c('Header',{staticClass:\"event__header\",on:{\"change\":_vm.changeTab}}),_c('a-card',{staticClass:\"event-view-card\",staticStyle:{\"margin-top\":\"24px\"},attrs:{\"bordered\":false,\"title\":\"事件列表\"}},[_c('div',{attrs:{\"slot\":\"extra\"},slot:\"extra\"},[_c('a-radio-group',{model:{value:(_vm.status),callback:function ($$v) {_vm.status=$$v},expression:\"status\"}},[_c('a-radio-button',{attrs:{\"value\":\"all\"}},[_vm._v(\"全部\")]),_c('a-radio-button',{attrs:{\"value\":\"processing\"}},[_vm._v(\"使用中\")]),_c('a-radio-button',{attrs:{\"value\":\"active\"}},[_vm._v(\"已归档\")])],1),_c('a-input-search',{staticStyle:{\"margin-left\":\"16px\",\"width\":\"272px\"},attrs:{\"placeholder\":\"搜索事件名、缩写和描述\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('div',{staticClass:\"operate\"},[_c('a-button',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"dashed\",\"icon\":\"plus\"},on:{\"click\":_vm.showForm}},[_vm._v(\"添加\")])],1),_c('a-list',{attrs:{\"size\":\"large\",\"pagination\":_vm.pagination,\"data-source\":_vm.events,\"locale\":{ emptyText: '暂无事件' }},scopedSlots:_vm._u([{key:\"renderItem\",fn:function(item){return _c('a-list-item',{},[_c('a-list-item-meta',{attrs:{\"description\":item.abbr}},[_c('a',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(item.name))]),_c('a',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\" \"+_vm._s(item.abbr))])]),_c('div',{attrs:{\"slot\":\"actions\"},slot:\"actions\"},[_c('a',{on:{\"click\":function($event){return _vm.handleEdit(item)}}},[_vm._v(\"编辑\")])]),_c('div',{attrs:{\"slot\":\"actions\"},slot:\"actions\"},[_c('a-dropdown',[_c('a-menu',{attrs:{\"slot\":\"overlay\"},slot:\"overlay\"},[_c('a-menu-item',[_c('a',{on:{\"click\":function($event){return _vm.handleArchive(item.id)}}},[_vm._v(_vm._s(item.active ? \"归档\" : \"还原\"))])]),_c('a-menu-item',[_c('a',{on:{\"click\":function($event){return _vm.handleDel(item.id)}}},[_vm._v(\"删除\")])])],1),_c('a',[_vm._v(\"更多\"),_c('a-icon',{attrs:{\"type\":\"down\"}})],1)],1)],1),_c('div',{staticClass:\"list-content\"},[_c('div',{staticClass:\"list-content-item\"},[_c('div',{staticClass:\"list-content-description\"},[_vm._v(\" \"+_vm._s(item.description)+\" \")])]),_c('div',{staticClass:\"list-content-item\"},[_c('div',{staticClass:\"list-content-tag\",on:{\"click\":function($event){return _vm.handleArchive(item.id)}}},[(item.active)?_c('a-tag',{attrs:{\"color\":\"blue\"}},[_vm._v(\" 使用中 \")]):_c('a-tag',{attrs:{\"color\":\"orange\"}},[_vm._v(\" 已归档 \")])],1)])])],1)}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"background-color\":\"#F5F5F5\"}},[_c('a-page-header',{attrs:{\"ghost\":false,\"title\":\"事件\",\"sub-title\":\"详细事件\",\"backIcon\":false}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./EventHeader.vue?vue&type=template&id=432f9b80&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-modal',{attrs:{\"visible\":_vm.visible,\"title\":_vm.hasEvent ? '修改事件' : '添加新的事件',\"okText\":_vm.hasEvent ? '保存' : '添加',\"cancelText\":\"取消\"},on:{\"cancel\":function($event){return _vm.$emit('cancel')},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onSubmit($event)},\"ok\":_vm.onSubmit}},[_c('a-form-model',{ref:\"form\",attrs:{\"layout\":\"vertical\",\"model\":_vm.form,\"rules\":_vm.rules}},[_c('a-form-model-item',{attrs:{\"label\":\"事件名\",\"prop\":\"name\"}},[_c('a-input',{on:{\"change\":_vm.onChange,\"pressEnter\":_vm.onSubmit},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"缩写方式\"}},[_c('a-select',{attrs:{\"label-in-value\":\"\"},on:{\"change\":_vm.onChange},model:{value:(_vm.abbrType),callback:function ($$v) {_vm.abbrType=$$v},expression:\"abbrType\"}},[_c('a-select-option',{attrs:{\"value\":\"name\"}},[_vm._v(\" 同名称 \")]),_c('a-select-option',{attrs:{\"value\":\"pinyin\"}},[_vm._v(\" 拼音 \")]),_c('a-select-option',{attrs:{\"value\":\"initial\"}},[_vm._v(\" 拼音首字母 \")]),_c('a-select-option',{attrs:{\"value\":\"user-defined\"}},[_vm._v(\" 自定义 \")])],1)],1),_c('a-form-model-item',{attrs:{\"label\":\"缩写\",\"prop\":\"abbr\"}},[_c('a-input',{attrs:{\"disabled\":_vm.disabledInput},on:{\"pressEnter\":_vm.onSubmit},model:{value:(_vm.form.abbr),callback:function ($$v) {_vm.$set(_vm.form, \"abbr\", $$v)},expression:\"form.abbr\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"描述\",\"prop\":\"description\"}},[_c('a-input',{on:{\"pressEnter\":_vm.onSubmit},model:{value:(_vm.form.description),callback:function ($$v) {_vm.$set(_vm.form, \"description\", $$v)},expression:\"form.description\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <a-modal\r\n    :visible=\"visible\"\r\n    :title=\"hasEvent ? '修改事件' : '添加新的事件'\"\r\n    :okText=\"hasEvent ? '保存' : '添加'\"\r\n    cancelText=\"取消\"\r\n    @cancel=\"$emit('cancel')\"\r\n    @keyup.enter=\"onSubmit\"\r\n    @ok=\"onSubmit\"\r\n  >\r\n    <a-form-model layout=\"vertical\" ref=\"form\" :model=\"form\" :rules=\"rules\">\r\n      <a-form-model-item label=\"事件名\" prop=\"name\">\r\n        <a-input\r\n          v-model=\"form.name\"\r\n          @change=\"onChange\"\r\n          @pressEnter=\"onSubmit\"\r\n        />\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"缩写方式\">\r\n        <a-select label-in-value v-model=\"abbrType\" @change=\"onChange\">\r\n          <a-select-option value=\"name\">\r\n            同名称\r\n          </a-select-option>\r\n          <a-select-option value=\"pinyin\">\r\n            拼音\r\n          </a-select-option>\r\n          <a-select-option value=\"initial\">\r\n            拼音首字母\r\n          </a-select-option>\r\n          <a-select-option value=\"user-defined\">\r\n            自定义\r\n          </a-select-option>\r\n        </a-select>\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"缩写\" prop=\"abbr\">\r\n        <a-input\r\n          v-model=\"form.abbr\"\r\n          :disabled=\"disabledInput\"\r\n          @pressEnter=\"onSubmit\"\r\n        />\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"描述\" prop=\"description\">\r\n        <a-input v-model=\"form.description\" @pressEnter=\"onSubmit\" />\r\n      </a-form-model-item>\r\n    </a-form-model>\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from \"vuex\";\r\n//Event数据结构\r\n// id: (...)\r\n// name: (...)\r\n// abbr: (...)\r\n// description: (...)\r\n// active: (...)\r\n// star: (...)\r\nexport default {\r\n  props: [\"visible\", \"event\"],\r\n  data() {\r\n    return {\r\n      abbrType: { key: \"initial\" },\r\n      disabledInput: true,\r\n      form: {\r\n        name: \"\",\r\n        abbr: \"\",\r\n        description: \"\"\r\n      },\r\n      rules: {\r\n        name: [{ required: true, message: \"请输入事件名\", trigger: \"blur\" }]\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    hasEvent() {\r\n      return this.event && Object.keys(this.event).length !== 0;\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.hasEvent) {\r\n      this.form.name = this.event.name;\r\n      this.form.abbr = this.event.abbr;\r\n      this.form.description = this.event.description;\r\n      this.disabledInput = false;\r\n      this.abbrType = { key: \"user-defined\" };\r\n    }\r\n  },\r\n  methods: {\r\n    onSubmit() {\r\n      this.$refs.form.validate(valid => {\r\n        if (valid) {\r\n          if (this.hasEvent) {\r\n            this.updatedEvent({ id: this.event.id, ...this.form });\r\n            this.$message.success(\"已保存\");\r\n          } else {\r\n            this.createEvent(this.form);\r\n            this.$message.success(\"添加完成\");\r\n          }\r\n\r\n          this.$emit(\"create\");\r\n          this.$refs.form.resetFields();\r\n        } else {\r\n          this.$message.error(\"数据错误\");\r\n\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    async onChange() {\r\n      const type = this.abbrType.key;\r\n      switch (type) {\r\n        case \"name\":\r\n          this.disabledInput = true;\r\n          this.form.abbr = this.form.name;\r\n\r\n          break;\r\n        case \"pinyin\":\r\n          this.form.abbr = await this.getPinyin(this.form.name);\r\n          this.disabledInput = true;\r\n\r\n          break;\r\n        case \"initial\":\r\n          this.disabledInput = true;\r\n          this.form.abbr = await this.getInitial(this.form.name);\r\n\r\n          break;\r\n        case \"user-defined\":\r\n          this.disabledInput = false;\r\n          break;\r\n      }\r\n    },\r\n    ...mapActions([\"createEvent\", \"updatedEvent\", \"getInitial\", \"getPinyin\"])\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EventForm.vue?vue&type=template&id=ea8d9d18&\"\nimport script from \"./EventForm.vue?vue&type=script&lang=js&\"\nexport * from \"./EventForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"event\">\r\n    <EventForm\r\n      :visible=\"visible\"\r\n      v-if=\"visible\"\r\n      :event=\"event\"\r\n      @cancel=\"hideForm\"\r\n      @create=\"hideForm\"\r\n    />\r\n    <Header class=\"event__header\" @change=\"changeTab\" />\r\n    <a-card\r\n      style=\"margin-top: 24px\"\r\n      :bordered=\"false\"\r\n      title=\"事件列表\"\r\n      class=\"event-view-card\"\r\n    >\r\n      <div slot=\"extra\">\r\n        <a-radio-group v-model=\"status\">\r\n          <a-radio-button value=\"all\">全部</a-radio-button>\r\n          <a-radio-button value=\"processing\">使用中</a-radio-button>\r\n          <a-radio-button value=\"active\">已归档</a-radio-button>\r\n        </a-radio-group>\r\n        <a-input-search\r\n          style=\"margin-left: 16px; width: 272px;\"\r\n          placeholder=\"搜索事件名、缩写和描述\"\r\n          v-model=\"search\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"operate\">\r\n        <a-button\r\n          type=\"dashed\"\r\n          style=\"width: 100%\"\r\n          icon=\"plus\"\r\n          @click=\"showForm\"\r\n          >添加</a-button\r\n        >\r\n      </div>\r\n\r\n      <a-list\r\n        size=\"large\"\r\n        :pagination=\"pagination\"\r\n        :data-source=\"events\"\r\n        :locale=\"{ emptyText: '暂无事件' }\"\r\n      >\r\n        <a-list-item slot=\"renderItem\" slot-scope=\"item\">\r\n          <a-list-item-meta :description=\"item.abbr\">\r\n            <!-- <a-avatar\r\n              slot=\"avatar\"\r\n              size=\"large\"\r\n              shape=\"square\"\r\n              :src=\"item.avatar\"\r\n            /> -->\r\n            <a slot=\"title\">{{ item.name }}</a>\r\n            <a slot=\"title\"> {{ item.abbr }}</a>\r\n          </a-list-item-meta>\r\n          <div slot=\"actions\">\r\n            <a @click=\"handleEdit(item)\">编辑</a>\r\n          </div>\r\n          <div slot=\"actions\">\r\n            <a-dropdown>\r\n              <a-menu slot=\"overlay\">\r\n                <a-menu-item\r\n                  ><a @click=\"handleArchive(item.id)\">{{\r\n                    item.active ? \"归档\" : \"还原\"\r\n                  }}</a></a-menu-item\r\n                >\r\n                <a-menu-item\r\n                  ><a @click=\"handleDel(item.id)\">删除</a></a-menu-item\r\n                >\r\n              </a-menu>\r\n              <a>更多<a-icon type=\"down\"/></a>\r\n            </a-dropdown>\r\n          </div>\r\n          <div class=\"list-content\">\r\n            <div class=\"list-content-item\">\r\n              <div class=\"list-content-description\">\r\n                {{ item.description }}\r\n              </div>\r\n            </div>\r\n            <div class=\"list-content-item\">\r\n              <div class=\"list-content-tag\" @click=\"handleArchive(item.id)\">\r\n                <a-tag v-if=\"item.active\" color=\"blue\">\r\n                  使用中\r\n                </a-tag>\r\n                <a-tag v-else color=\"orange\">\r\n                  已归档\r\n                </a-tag>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </a-list-item>\r\n      </a-list>\r\n    </a-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Header from \"./components/EventHeader\";\r\nimport EventForm from \"./components/EventForm\";\r\nimport { mapActions } from \"vuex\";\r\n\r\n// import { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  components: {\r\n    Header,\r\n    EventForm\r\n  },\r\n  data() {\r\n    return {\r\n      pagination: {\r\n        pageSize: 8,\r\n        hideOnSinglePage: true\r\n      },\r\n      status: \"all\",\r\n      visible: false,\r\n      event: {},\r\n      search: \"\"\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    changeTab(activeKey) {\r\n      this.showActive = activeKey === \"active\" ? true : false;\r\n    },\r\n    handleDel(id) {\r\n      this.$modal.confirm({\r\n        title: \"确定要删除这个事件吗？\",\r\n        content: \"删除事件的同时也将会从记录该事件的时块上删除事件\",\r\n        okText: \"删除\",\r\n        okType: \"danger\",\r\n        cancelText: \"取消\",\r\n        onOk: () => {\r\n          this.deleteEvent(id);\r\n        }\r\n      });\r\n    },\r\n    handleEdit(event) {\r\n      this.event = event;\r\n      this.visible = true;\r\n    },\r\n    handleArchive(id) {\r\n      this.toggleArchiveEvent(id);\r\n      if (this.$store.getters.events[id].active) {\r\n        this.$message.success(\"归档成功\");\r\n      } else {\r\n        this.$message.success(\"还原成功\");\r\n      }\r\n    },\r\n    showForm(event) {\r\n      if (event.screenX + event.screenY + event.clientX + event.clientY === 0)\r\n        return; //莫名奇妙的会自动触发click，导致表单重新出现,通过点击位置判断是否为自动触发的\r\n      this.visible = true;\r\n    },\r\n    hideForm() {\r\n      this.event = null;\r\n      this.visible = false;\r\n    },\r\n    ...mapActions([\"deleteEvent\", \"toggleStarEvent\", \"toggleArchiveEvent\"])\r\n  },\r\n  computed: {\r\n    showActive() {\r\n      return this.status === \"processing\";\r\n    },\r\n    events() {\r\n      const result = [];\r\n      const events = this.$store.getters.events;\r\n\r\n      for (const i in events) {\r\n        if (\r\n          (events[i].active === this.showActive || this.status === \"all\") &&\r\n          (events[i].name.match(this.search) ||\r\n            events[i].abbr.toUpperCase().match(this.search.toUpperCase()) ||\r\n            events[i].description.match(this.search))\r\n        ) {\r\n          result.push(events[i]);\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n    // ...mapGetters([\"events\"])\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.event-view-card {\r\n  margin: 2rem;\r\n}\r\n.list-content-description {\r\n  max-width: 30rem;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.list-content-item {\r\n  color: rgba(0, 0, 0, 0.45);\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  font-size: 14px;\r\n  margin-left: 40px;\r\n  span {\r\n    line-height: 20px;\r\n  }\r\n  p {\r\n    margin-top: 4px;\r\n    margin-bottom: 0;\r\n    line-height: 22px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=ba97deb2&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}