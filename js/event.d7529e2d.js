(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["event"],{"1a51":function(e,t,n){},c4a5:function(e,t,n){"use strict";var r=n("1a51"),a=n.n(r);a.a},cbab:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"event"},[e.visible?n("EventForm",{attrs:{visible:e.visible,event:e.event},on:{cancel:e.hideForm,create:e.hideForm}}):e._e(),n("Header",{staticClass:"event__header",on:{change:e.changeTab}}),n("a-card",{staticClass:"event-view-card",staticStyle:{"margin-top":"24px"},attrs:{bordered:!1,title:"事件列表"}},[n("div",{attrs:{slot:"extra"},slot:"extra"},[n("a-radio-group",{model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[n("a-radio-button",{attrs:{value:"all"}},[e._v("全部")]),n("a-radio-button",{attrs:{value:"processing"}},[e._v("使用中")]),n("a-radio-button",{attrs:{value:"active"}},[e._v("已归档")])],1),n("a-input-search",{staticStyle:{"margin-left":"16px",width:"272px"},attrs:{placeholder:"搜索事件名、缩写和描述"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),n("div",{staticClass:"operate"},[n("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed",icon:"plus"},on:{click:e.showForm}},[e._v("添加")])],1),n("a-list",{attrs:{size:"large",pagination:e.pagination,"data-source":e.events,locale:{emptyText:"暂无事件"}},scopedSlots:e._u([{key:"renderItem",fn:function(t){return n("a-list-item",{},[n("a-list-item-meta",{attrs:{description:t.abbr}},[n("a",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))]),n("a",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(t.abbr))])]),n("div",{attrs:{slot:"actions"},slot:"actions"},[n("a",{on:{click:function(n){return e.handleEdit(t)}}},[e._v("编辑")])]),n("div",{attrs:{slot:"actions"},slot:"actions"},[n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",[n("a",{on:{click:function(n){return e.handleArchive(t.id)}}},[e._v(e._s(t.active?"归档":"还原"))])]),n("a-menu-item",[n("a",{on:{click:function(n){return e.handleDel(t.id)}}},[e._v("删除")])])],1),n("a",[e._v("更多"),n("a-icon",{attrs:{type:"down"}})],1)],1)],1),n("div",{staticClass:"list-content"},[n("div",{staticClass:"list-content-item"},[n("div",{staticClass:"list-content-description"},[e._v(" "+e._s(t.description)+" ")])]),n("div",{staticClass:"list-content-item"},[n("div",{staticClass:"list-content-tag",on:{click:function(n){return e.handleArchive(t.id)}}},[t.active?n("a-tag",{attrs:{color:"blue"}},[e._v(" 使用中 ")]):n("a-tag",{attrs:{color:"orange"}},[e._v(" 已归档 ")])],1)])])],1)}}])})],1)],1)},a=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"background-color":"#F5F5F5"}},[n("a-page-header",{attrs:{ghost:!1,title:"事件","sub-title":"详细事件",backIcon:!1}})],1)},s=[],o=n("2877"),c={},l=Object(o["a"])(c,i,s,!1,null,null,null),u=l.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{visible:e.visible,title:e.hasEvent?"修改事件":"添加新的事件",okText:e.hasEvent?"保存":"添加",cancelText:"取消"},on:{cancel:function(t){return e.$emit("cancel")},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)},ok:e.onSubmit}},[n("a-form-model",{ref:"form",attrs:{layout:"vertical",model:e.form,rules:e.rules}},[n("a-form-model-item",{attrs:{label:"事件名",prop:"name"}},[n("a-input",{on:{change:e.onChange,pressEnter:e.onSubmit},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("a-form-model-item",{attrs:{label:"缩写方式"}},[n("a-select",{attrs:{"label-in-value":""},on:{change:e.onChange},model:{value:e.abbrType,callback:function(t){e.abbrType=t},expression:"abbrType"}},[n("a-select-option",{attrs:{value:"name"}},[e._v(" 同名称 ")]),n("a-select-option",{attrs:{value:"pinyin"}},[e._v(" 拼音 ")]),n("a-select-option",{attrs:{value:"initial"}},[e._v(" 拼音首字母 ")]),n("a-select-option",{attrs:{value:"user-defined"}},[e._v(" 自定义 ")])],1)],1),n("a-form-model-item",{attrs:{label:"缩写",prop:"abbr"}},[n("a-input",{attrs:{disabled:e.disabledInput},on:{pressEnter:e.onSubmit},model:{value:e.form.abbr,callback:function(t){e.$set(e.form,"abbr",t)},expression:"form.abbr"}})],1),n("a-form-model-item",{attrs:{label:"描述",prop:"description"}},[n("a-input",{on:{pressEnter:e.onSubmit},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1)],1)},b=[],d=n("a34a"),p=n.n(d),m=n("2f62");function f(e,t,n,r,a,i,s){try{var o=e[i](s),c=o.value}catch(l){return void n(l)}o.done?t(c):Promise.resolve(c).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){f(i,r,a,s,o,"next",e)}function o(e){f(i,r,a,s,o,"throw",e)}s(void 0)}))}}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k={props:["visible","event"],data:function(){var e=this;return{abbrType:{key:"initial"},disabledInput:!0,form:{name:"",abbr:"",description:""},rules:{name:[{required:!0,message:"请输入事件名",trigger:"blur"},{validator:function(t,n,r){for(var a in e.events)e.hasEvent||e.events[a].name!==n||r("已有相同名字的事件");r()},trigger:"blur"}]}}},computed:y({hasEvent:function(){return this.event&&0!==Object.keys(this.event).length}},Object(m["c"])(["events"])),mounted:function(){this.hasEvent&&(this.form.name=this.event.name,this.form.abbr=this.event.abbr,this.form.description=this.event.description,this.disabledInput=!1,this.abbrType={key:"user-defined"})},methods:y({onSubmit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return e.$message.error("数据错误"),!1;e.hasEvent?(e.updatedEvent(y({id:e.event.id},e.form)),e.$message.success("已保存")):(e.createEvent(e.form),e.$message.success("添加完成")),e.$emit("create"),e.$refs.form.resetFields()}))},onChange:function(){var e=this;return h(p.a.mark((function t(){var n;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.abbrType.key,t.t0=n,t.next="name"===t.t0?4:"pinyin"===t.t0?7:"initial"===t.t0?12:"user-defined"===t.t0?17:19;break;case 4:return e.disabledInput=!0,e.form.abbr=e.form.name,t.abrupt("break",19);case 7:return t.next=9,e.getPinyin(e.form.name);case 9:return e.form.abbr=t.sent,e.disabledInput=!0,t.abrupt("break",19);case 12:return e.disabledInput=!0,t.next=15,e.getInitial(e.form.name);case 15:return e.form.abbr=t.sent,t.abrupt("break",19);case 17:return e.disabledInput=!1,t.abrupt("break",19);case 19:case"end":return t.stop()}}),t)})))()}},Object(m["b"])(["createEvent","updatedEvent","getInitial","getPinyin"]))},w=k,_=Object(o["a"])(w,v,b,!1,null,null,null),j=_.exports;function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S={components:{Header:u,EventForm:j},data:function(){return{pagination:{pageSize:8,hideOnSinglePage:!0},status:"all",visible:!1,event:{},search:""}},methods:x({changeTab:function(e){this.showActive="active"===e},handleDel:function(e){var t=this;this.$modal.confirm({title:"确定要删除这个事件吗？",content:"删除事件的同时也将会从记录该事件的时块上删除事件",okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){t.deleteEvent(e)}})},handleEdit:function(e){this.event=e,this.visible=!0},handleArchive:function(e){this.toggleArchiveEvent(e),this.$store.getters.events[e].active?this.$message.success("归档成功"):this.$message.success("还原成功")},showForm:function(e){e.screenX+e.screenY+e.clientX+e.clientY!==0&&(this.visible=!0)},hideForm:function(){this.event=null,this.visible=!1}},Object(m["b"])(["deleteEvent","toggleStarEvent","toggleArchiveEvent"])),computed:{showActive:function(){return"processing"===this.status},events:function(){var e=[],t=this.$store.getters.events;for(var n in t)t[n].active!==this.showActive&&"all"!==this.status||!(t[n].name.match(this.search)||t[n].abbr.toUpperCase().match(this.search.toUpperCase())||t[n].description.match(this.search))||e.push(t[n]);return e}}},$=S,C=(n("c4a5"),Object(o["a"])($,r,a,!1,null,null,null));t["default"]=C.exports}}]);
//# sourceMappingURL=event.d7529e2d.js.map